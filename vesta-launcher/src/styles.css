:root {
	/* Use the system font stack for consistent cross-platform rendering */
	font-family:
		-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Segoe UI Emoji", "Segoe UI Symbol", Inter, Avenir, Helvetica, sans-serif;
	font-size: 100%;
	/* Fallback for text color â€” modern browsers may support color-contrast, but provide a reliable fallback */
	--text-color: #e8eef0; /* light fallback for dark backgrounds */
	color: var(--text-color);

	--background-opacity: 0.05;
	--background-color: linear-gradient(
		var(--background-angle),
		hsl(245deg 100% 7% / var(--background-opacity)) 0%,
		hsl(var(--color__primary-hue) 81% 40% / var(--background-opacity)) 35%,
		hsl(var(--color__secondary-hue) 100% 50% / var(--background-opacity)) 100%
	);

	font-synthesis: none;
	text-rendering: optimizelegibility;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	text-size-adjust: 100%;

	--kb-menu-content-transform-origin: top center;
	--color__secondary-hue: calc(var(--color__primary-hue) - 180);
	--color__destructive-hue: 0;
	--color__green-hue: 120;
	--color__warning-hue: 40;
	--color__sat-20: 20%;
	--color__sat-50: 50%;
	--color__sat-70: 70%;
	--color__br-12: 12%;
	--color__br-20: 20%;
	--color__br-50: 50%;
	--color__br-70: 70%;
	--font-xxsmall: 0.75rem;
	--font-xsmall: 0.85rem;
	--font-small: 1rem;
	--font-medium: 1.25rem;
	--font-large: 2rem;
	--font-xlarge: 4rem;
	--font-min-size: 12px; /* minimum readable font-size */
	--sb-track-color: hsl(var(--color__secondary-hue) 20% 30% / 20%);
	--sb-thumb-color: hsl(var(--color__primary-hue) 0% var(--color__br-12));
	--sb-size: 14px;

	/* Severity hues (used for progress and borders) */
	--color__error-hue: 0;
	--color__warning-hue: 40;
	--color__success-hue: 120;
	--color__info-hue: var(--color__primary-hue);

	/* Liquid Glass Configuration Variables (8 controls) */
	--liquid-inner-shadow-blur: 10px;
	--liquid-inner-shadow-spread: -20px;
	--liquid-inner-shadow-color: hsl(var(--color__primary-hue) 60% 80% / 0.7);
	--liquid-tint-saturation: 30%;
	--liquid-tint-lightness: 15%;
	--liquid-tint-opacity: 0.8;
	--liquid-frost-blur: 8px;
	--liquid-noise-frequency: 2;
	--liquid-noise-strength: 40;
	--liquid-outer-shadow-blur: 24px;

	/* Computed Liquid Glass Properties */
	--liquid-background: hsl(
		var(--color__primary-hue) var(--liquid-tint-saturation)
			var(--liquid-tint-lightness) /
		var(--liquid-tint-opacity)
	);
	--liquid-backdrop-filter: blur(var(--liquid-frost-blur));
	--liquid-box-shadow:
		0 6px var(--liquid-outer-shadow-blur) rgba(0, 0, 0, 0.2), inset 0 0
		var(--liquid-inner-shadow-blur) var(--liquid-inner-shadow-spread)
		var(--liquid-inner-shadow-color);

	/* Legacy Glass variables (updated to use liquid system) */
	--bg-glass: var(--liquid-background);
	--bg-surface: hsl(var(--color__primary-hue) 10% 15% / 0.95);
	--bg-surface-hover: hsl(var(--color__primary-hue) 10% 20% / 0.98);
	--border-subtle: hsl(var(--color__primary-hue) 10% 30% / 0.4);
	--border-glass: hsl(var(--color__primary-hue) 10% 100% / 0.15);
	--glass-blur: var(--liquid-backdrop-filter);
}

#app {
	height: 100%;
	width: 100%;
	background: var(--background-color);
	min-width: 450px;
	overflow: hidden;
}

body {
	position: fixed;
	width: 100%;
	height: 100%;
	overflow: hidden;
}

/* Respect user preferences for light color scheme */
@media (prefers-color-scheme: light) {
	:root {
		--text-color: #111827; /* near-black for strong contrast on light backgrounds */
		--sb-track-color: hsl(var(--color__secondary-hue) 20% 90% / 28%);
		--sb-thumb-color: hsl(var(--color__primary-hue) 70% 40%);
	}
}

/* Respect user preference for higher contrast */
@media (prefers-contrast: more) {
	:root {
		--text-color: #0b0b0b;
		font-weight: 500;
	}
	.sidebar__notification {
		border-width: 1.5px;
	}
}

h1 {
	font-size: var(--font-medium);
}

* {
	box-sizing: border-box;
}

select,
textarea,
input,
button {
	font: inherit;
}

*::-webkit-scrollbar {
	width: var(--sb-size);
}

*::-webkit-scrollbar-track {
	background: var(--sb-track-color);
	border-radius: 3px;
}

*::-webkit-scrollbar-thumb {
	background: var(--sb-thumb-color);
	border-radius: 3px;
	border: 1px solid #232e33;
}

@supports not selector(::-webkit-scrollbar) {
	* {
		scrollbar-color: var(--sb-thumb-color) var(--sb-track-color);
	}
}

@property --color__primary-hue {
	syntax: "<integer>";
	initial-value: 120;
	inherits: true;
}

@property --background-angle {
	syntax: "<angle>";
	initial-value: 90deg;
	inherits: true;
}

:root[data-reduced-motion="true"] * {
	animation-duration: 0ms !important;
	animation-iteration-count: 1 !important;
	transition-duration: 0ms !important;
	scroll-behavior: auto !important;
}

:root[data-reduced-effects="true"] {
	--liquid-backdrop-filter: none;
	--liquid-background: var(--bg-surface);
	--liquid-box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
	--bg-glass: var(--bg-surface);
}

/* Liquid Glass Utility Class */
.liquid-glass {
	background: var(--liquid-background);
	backdrop-filter: var(--liquid-backdrop-filter);
	-webkit-backdrop-filter: var(--liquid-backdrop-filter);
	box-shadow: var(--liquid-box-shadow);
	isolation: isolate;
	border: 1px solid transparent;
	position: relative;
}

/* Ensure content inside glass doesn't inherit backdrop blur */
.liquid-glass > * {
	backdrop-filter: none !important;
	-webkit-backdrop-filter: none !important;
}

/* Reduced Effects Override */
:root[data-reduced-effects="true"] .liquid-glass {
	backdrop-filter: none;
	-webkit-backdrop-filter: none;
	filter: none;
	border: 1px solid var(--border-subtle);
}
