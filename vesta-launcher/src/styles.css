:root {
	/* =============================================================================
	   THEME SYSTEM - LAYER 1: BASE TOKENS (Primitives)
	   ============================================================================= */

	/* Base Hues (User Configurable) */
	--color__primary-hue: 220;
	--button-lightness: 35%;
	--accent-base: var(--color__primary-hue) 70% var(--button-lightness);
	--hue-secondary: calc(
		var(--color__primary-hue) +
		180
	); /* Complementary by default */

	/* Semantic Hues (Fixed for consistency) */
	--hue-success: 140;
	--hue-warning: 45;
	--hue-error: 0;
	--hue-info: 210;

	/* Light/Dark Mode Lightness Values */
	--lightness-surface-base: 12%;
	--lightness-surface-raised: 18%;
	--lightness-surface-overlay: 20%;
	--lightness-surface-sunken: 8%;
	--lightness-text-primary: 90%;
	--lightness-text-secondary: 70%;
	--lightness-text-tertiary: 50%;
	--lightness-border: 30%;

	/* Style Mode (Set by theme template: glass/satin/flat) */
	--effect-blur: 16px;
	--effect-opacity: 0.8;
	--effect-shadow-depth: 24px;
	--effect-glow-opacity: 0.7;

	/* Animation Tokens */
	--animate-spin-duration: 1s;

	/* Gradient Configuration */
	--gradient-enabled: 1; /* 0 = solid, 1 = gradient */
	--rotation: 135deg;
	--background-opacity: 0.12;

	/* =============================================================================
	   THEME SYSTEM - LAYER 2: SEMANTIC TOKENS (Abstract Intent)
	   ============================================================================= */

	/* Surface Hierarchy (with alpha for Windows Mica/Acrylic support) */
	--surface-base: hsl(
		var(--color__primary-hue) 10% var(--lightness-surface-base) /
		0.95
	);
	--surface-raised: hsl(
		var(--color__primary-hue) 15% var(--lightness-surface-raised) /
		var(--effect-opacity)
	);
	--surface-overlay: hsl(
		var(--color__primary-hue) 20% var(--lightness-surface-overlay) /
		var(--effect-opacity)
	);
	--surface-sunken: hsl(
		var(--color__primary-hue) 5% var(--lightness-surface-sunken) /
		0.98
	);

	/* Borders */
	--border-subtle: hsl(
		var(--color__primary-hue) 10% var(--lightness-border) /
		0.4
	);
	--border-strong: hsl(
		var(--color__primary-hue) 20% var(--lightness-border) /
		0.7
	);
	--border-focus: hsl(var(--color__primary-hue) 70% 50% / 0.8);
	--border-glass: hsl(var(--color__primary-hue) 10% 100% / 0.15);
	--border-width-subtle: 1px;
	--border-width-strong: 1px;

	/* Text Colors */
	--text-primary: hsl(
		var(--color__primary-hue) 5% var(--lightness-text-primary)
	);
	--text-secondary: hsl(
		var(--color__primary-hue) 5% var(--lightness-text-secondary)
	);
	--text-tertiary: hsl(
		var(--color__primary-hue) 5% var(--lightness-text-tertiary)
	);
	--text-inverse: hsl(var(--color__primary-hue) 5% 10%);
	--text-on-primary: hsl(var(--color__primary-hue) 5% 95%);
	--text-on-accent: hsl(var(--color__primary-hue) 5% 95%);

	--primary-low: hsl(var(--color__primary-hue) 70% 50% / 0.15);
	--primary-accent: hsl(var(--color__primary-hue) 80% 60%);

	/* Interactive States */
	--interactive-base: hsl(var(--color__primary-hue) 60% 50%);
	--interactive-hover: hsl(var(--color__primary-hue) 70% 55%);
	--interactive-active: hsl(var(--color__primary-hue) 80% 60%);
	--interactive-disabled: hsl(var(--color__primary-hue) 10% 40% / 0.5);

	/* Z-Index Hierarchy */
	--z-loader: 9999;

	/* Icon Colors (for SVG fills) */
	--icon-primary: hsl(var(--color__primary-hue) 5% 90%);
	--icon-secondary: hsl(var(--color__primary-hue) 5% 70%);
	--icon-muted: hsl(var(--color__primary-hue) 5% 50%);

	/* Typography */
	--font-xxsmall: 0.75rem;
	--font-xsmall: 0.85rem;
	--font-small: 1rem;
	--font-medium: 1.25rem;
	--font-large: 2rem;
	--font-xlarge: 4rem;
	--font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;

	/* Header/Navigation Colors */
	--page-viewer-nav-color: hsl(var(--color__primary-hue) 10% 90%);
	--page-viewer-nav-bg: var(--surface-raised);

	/* Sidebar Colors */
	--sidebar-bg: var(--surface-base);
	--sidebar-hover: var(--surface-raised);
	--sidebar-active: var(--surface-overlay);

	/* Accent Colors */
	--accent-primary: hsl(var(--color__primary-hue) 70% var(--button-lightness));
	--accent-primary-hover: hsl(var(--color__primary-hue) 80% calc(var(--button-lightness) + 10%));
	--accent-secondary: hsl(var(--hue-secondary) 60% 50%);

	--primary: var(--accent-primary);
	--primary-hover: var(--accent-primary-hover);
	--secondary: var(--accent-secondary);

	/* Shorthands for Button and other components */
	--destructive: var(--semantic-error);
	--warning: var(--semantic-warning);

	/* Semantic States (Fixed hues for recognition) */
	--semantic-success: hsl(var(--hue-success) 60% 50%);
	--semantic-success-bg: hsl(var(--hue-success) 60% 50% / 0.15);
	--semantic-warning: hsl(var(--hue-warning) 90% 50%);
	--semantic-warning-bg: hsl(var(--hue-warning) 90% 50% / 0.15);
	--semantic-error: hsl(var(--hue-error) 70% 50%);
	--semantic-error-bg: hsl(var(--hue-error) 70% 50% / 0.15);
	--semantic-info: hsl(var(--hue-info) 70% 50%);
	--semantic-info-bg: hsl(var(--hue-info) 70% 50% / 0.15);

	/* Effects */
	--effect-shadow: 0 6px var(--effect-shadow-depth) hsl(0 0% 0% / 0.2);
	--effect-glow: hsl(
		var(--color__primary-hue) 60% 80% /
		var(--effect-glow-opacity)
	);

	/* =============================================================================
	   THEME SYSTEM - LAYER 3: COMPONENT TOKENS (Specific Use)
	   ============================================================================= */

	/* Dialog/Modal */
	--dialog-background: var(--surface-overlay);
	--dialog-border: var(--border-subtle);
	--dialog-overlay-bg: hsl(0 0% 0% / 0.6);

	/* Cards */
	--card-background: var(--surface-raised);
	--card-border: var(--border-subtle);
	--card-hover-shadow: 0 8px 24px hsl(0 0% 0% / 0.18);

	/* Scrollbar */
	--scrollbar-track: hsl(
		var(--hue-secondary) 20% var(--lightness-border) /
		0.2
	);
	--scrollbar-thumb: hsl(var(--color__primary-hue) 10% var(--lightness-border));
	--scrollbar-thumb-border: hsl(var(--color__primary-hue) 10% 20%);

	/* Background Gradient Stops */
	--gradient-stop-1: hsl(var(--color__primary-hue) 80% 5% / var(--background-opacity));
	--gradient-stop-2: hsl(var(--color__primary-hue) 81% 40% / var(--background-opacity));
	--gradient-stop-3: hsl(var(--hue-secondary) 100% 50% / var(--background-opacity));

	/* Background Gradient (Default to linear) */
	--background-color: linear-gradient(
		var(--rotation, 135deg),
		var(--gradient-stop-1) 0%,
		var(--gradient-stop-2) 35%,
		var(--gradient-stop-3) 100%
	);

/* =============================================================================
	   LEGACY COMPATIBILITY (Backwards compatibility during migration)
	   ============================================================================= */

	/* Keep old variable names mapped to new tokens for gradual migration */
	--color__secondary-hue: var(--hue-secondary);
	--color__error-hue: var(--hue-error);
	--color__warning-hue: var(--hue-warning);
	--color__success-hue: var(--hue-success);
	--color__info-hue: var(--hue-info);
	--text-color: var(--text-primary);
	--bg-surface: var(--surface-base);
	--bg-surface-hover: var(--surface-raised);

	/* Shorthand surface tokens */
	--surface-low: var(--surface-sunken);
	--surface-medium: var(--surface-base);
	--surface-high: var(--surface-raised);

	/* Shorthand border tokens */
	--border: var(--border-subtle);

	/* Shorthand text tokens */
	--text: var(--text-primary);
	--text-muted: var(--text-secondary);

	/* Shorthand primary tokens */
	--primary-low: hsl(var(--color__primary-hue) 70% 50% / 0.15);
	--primary-accent: hsl(var(--color__primary-hue) 80% 60%);
	--primary-rgb: var(--color__primary-hue) 70% 50%;
	--sb-track-color: var(--scrollbar-track);
	--sb-thumb-color: var(--scrollbar-thumb);

	/* =============================================================================
	   LIQUID GLASS SYSTEM (Updated to use new tokens)
	   ============================================================================= */

	--liquid-inner-shadow-blur: 10px;
	--liquid-inner-shadow-spread: -20px;
	--liquid-inner-shadow-color: var(--effect-glow);
	--liquid-tint-saturation: 30%;
	--liquid-tint-lightness: 15%;
	--liquid-tint-opacity: var(--effect-opacity);
	--liquid-frost-blur: var(--effect-blur);
	--liquid-noise-frequency: 2;
	--liquid-noise-strength: 40;
	--liquid-outer-shadow-blur: 24px;

	/* Computed Liquid Glass Properties */
	--liquid-background: hsl(
		var(--color__primary-hue) var(--liquid-tint-saturation)
			var(--liquid-tint-lightness) /
		var(--liquid-tint-opacity)
	);
	--liquid-backdrop-filter: blur(var(--liquid-frost-blur));
	--liquid-box-shadow:
		0 6px var(--liquid-outer-shadow-blur) rgba(0, 0, 0, 0.2), inset 0 0
		var(--liquid-inner-shadow-blur) var(--liquid-inner-shadow-spread)
		var(--liquid-inner-shadow-color);

	/* Legacy Glass variables (updated to use liquid system) */
	--bg-glass: var(--liquid-background);
	--glass-blur: var(--liquid-backdrop-filter);

	/* =============================================================================
	   TYPOGRAPHY & UI BASICS
	   ============================================================================= */

	font-family:
		-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Segoe UI Emoji", "Segoe UI Symbol", Inter, Avenir, Helvetica, sans-serif;
	font-size: 100%;
	color: var(--text-primary);

	font-synthesis: none;
	text-rendering: optimizelegibility;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	text-size-adjust: 100%;

	--font-min-size: 12px;
	--sb-size: 14px;

	--kb-menu-content-transform-origin: top center;
}

/* Radial Gradient Override */
:root[data-gradient-type="radial"] {
	--background-color: radial-gradient(
		farthest-corner at calc(50% + 40% * cos(var(--rotation, 135deg))) calc(50% + 40% * sin(var(--rotation, 135deg))),
		var(--gradient-stop-2) 0%,
		var(--gradient-stop-1) 70%,
		hsl(var(--color__primary-hue) 100% 5% / var(--background-opacity)) 100%
	);
}

#app {
	height: 100%;
	width: 100%;
	/* Ensure we have a solid base color under the transparent gradient */
	background-color: var(--surface-base);
	background-image: var(--background-color);
	background-attachment: fixed;
	background-size: cover;
	min-width: 450px;
	overflow: hidden;
}

body {
	position: fixed;
	width: 100%;
	height: 100%;
	overflow: hidden;
}

/* =============================================================================
   LIGHT MODE OVERRIDES (Windows Mica support + light theme)
   ============================================================================= */
:root[data-theme="light"] {
	/* Override lightness values for light mode */
	--button-lightness: 60%;
	--lightness-surface-base: 85%;
	--lightness-surface-raised: 90%;
	--lightness-surface-overlay: 95%;
	--lightness-surface-sunken: 80%;
	--lightness-text-primary: 15%;
	--lightness-text-secondary: 35%;
	--lightness-text-tertiary: 55%;
	--lightness-border: 60%;

	/* Make background gradient more visible in light mode */
	--background-opacity: 0.6;

	/* Override the main background gradient stops for better light mode visibility */
	--gradient-stop-1: hsl(var(--color__primary-hue) 70% 65% / var(--background-opacity));
	--gradient-stop-2: hsl(var(--color__primary-hue) 75% 60% / var(--background-opacity));
	--gradient-stop-3: hsl(var(--hue-secondary) 80% 65% / var(--background-opacity));

	/* Adjust surface colors to have better contrast against light Mica background */
	--surface-base: hsl(var(--color__primary-hue) 20% 80% / 0.85);
	--surface-raised: hsl(var(--color__primary-hue) 25% 85% / 0.9);
	--surface-overlay: hsl(var(--color__primary-hue) 30% 90% / 0.92);
	--surface-sunken: hsl(var(--color__primary-hue) 15% 75% / 0.8);

	/* Stronger borders for light mode visibility */
	--border-subtle: hsl(var(--color__primary-hue) 25% 50% / 0.4);
	--border-strong: hsl(var(--color__primary-hue) 35% 45% / 0.6);

	/* Icon Colors for light mode (DARK icons on light background) */
	--icon-primary: hsl(var(--color__primary-hue) 20% 25%);
	--icon-secondary: hsl(var(--color__primary-hue) 15% 35%);
	--icon-muted: hsl(var(--color__primary-hue) 10% 50%);

	/* Button text/icon colors for light mode */
	--text-on-accent: hsl(
		var(--color__primary-hue) 5% 95%
	); /* Keep light text on accent buttons */

	/* Header and navigation colors for light mode (DARK text/icons) */
	--page-viewer-nav-color: hsl(var(--color__primary-hue) 30% 25%);
	--page-viewer-nav-bg: hsl(var(--color__primary-hue) 20% 85% / 0.8);

	/* Sidebar colors for light mode */
	--sidebar-bg: hsl(var(--color__primary-hue) 15% 82% / 0.9);
	--sidebar-hover: hsl(var(--color__primary-hue) 20% 75% / 0.95);
	--sidebar-active: hsl(var(--color__primary-hue) 30% 70% / 1);

	/* Scrollbar for light mode */
	--scrollbar-track: hsl(var(--color__primary-hue) 15% 85% / 0.5);
	--scrollbar-thumb: hsl(var(--color__primary-hue) 40% 50%);
	--scrollbar-thumb-border: hsl(var(--color__primary-hue) 45% 45%);

	/* Adjust shadows for light mode */
	--effect-shadow: 0 4px var(--effect-shadow-depth) hsl(0 0% 0% / 0.12);
	--dialog-overlay-bg: hsl(0 0% 0% / 0.35);

	/* Liquid glass adjustments for light mode */
	--liquid-tint-saturation: 30%;
	--liquid-tint-lightness: 80%;
	--liquid-background: hsl(
		var(--color__primary-hue) var(--liquid-tint-saturation)
			var(--liquid-tint-lightness) /
		var(--liquid-tint-opacity)
	);
}

:root[data-theme="light"] #app {
	backdrop-filter: none;
}

:root[data-theme="light"] #sidebar:is(.sidebar--open) {
	background: var(--sidebar-bg);
	box-shadow: hsl(0deg 0% 0% / 0.12) 4px 4px 8px;
}

@media (prefers-color-scheme: light) {
	:root:not([data-theme="dark"]) {
		/* Override lightness values for light mode */
		--button-lightness: 60%;
		--lightness-surface-base: 85%;
		--lightness-surface-raised: 90%;
		--lightness-surface-overlay: 95%;
		--lightness-surface-sunken: 80%;
		--lightness-text-primary: 15%;
		--lightness-text-secondary: 35%;
		--lightness-text-tertiary: 55%;
		--lightness-border: 60%;

		/* Make background gradient more visible in light mode */
		--background-opacity: 0.6;

		/* Override the main background gradient stops for better light mode visibility */
		--gradient-stop-1: hsl(var(--color__primary-hue) 70% 65% / var(--background-opacity));
		--gradient-stop-2: hsl(var(--color__primary-hue) 75% 60% / var(--background-opacity));
		--gradient-stop-3: hsl(var(--hue-secondary) 80% 65% / var(--background-opacity));

		/* Adjust surface colors to have better contrast against light Mica background */
		--surface-base: hsl(var(--color__primary-hue) 20% 80% / 0.85);
		--surface-raised: hsl(var(--color__primary-hue) 25% 85% / 0.9);
		--surface-overlay: hsl(var(--color__primary-hue) 30% 90% / 0.92);
		--surface-sunken: hsl(var(--color__primary-hue) 15% 75% / 0.8);

		/* Stronger borders for light mode visibility */
		--border-subtle: hsl(var(--color__primary-hue) 25% 50% / 0.4);
		--border-strong: hsl(var(--color__primary-hue) 35% 45% / 0.6);

		/* Icon Colors for light mode (DARK icons on light background) */
		--icon-primary: hsl(var(--color__primary-hue) 20% 25%);
		--icon-secondary: hsl(var(--color__primary-hue) 15% 35%);
		--icon-muted: hsl(var(--color__primary-hue) 10% 50%);

		/* Button text/icon colors for light mode */
		--text-on-accent: hsl(
			var(--color__primary-hue) 5% 95%
		); /* Keep light text on accent buttons */

		/* Header and navigation colors for light mode (DARK text/icons) */
		--page-viewer-nav-color: hsl(var(--color__primary-hue) 30% 25%);
		--page-viewer-nav-bg: hsl(var(--color__primary-hue) 20% 85% / 0.8);

		/* Sidebar colors for light mode */
		--sidebar-bg: hsl(var(--color__primary-hue) 15% 82% / 0.9);
		--sidebar-hover: hsl(var(--color__primary-hue) 20% 75% / 0.95);
		--sidebar-active: hsl(var(--color__primary-hue) 30% 70% / 1);

		/* Scrollbar for light mode */
		--scrollbar-track: hsl(var(--color__primary-hue) 15% 85% / 0.5);
		--scrollbar-thumb: hsl(var(--color__primary-hue) 40% 50%);
		--scrollbar-thumb-border: hsl(var(--color__primary-hue) 45% 45%);

		/* Adjust shadows for light mode */
		--effect-shadow: 0 4px var(--effect-shadow-depth) hsl(0 0% 0% / 0.12);
		--dialog-overlay-bg: hsl(0 0% 0% / 0.35);

		/* Liquid glass adjustments for light mode */
		--liquid-tint-saturation: 30%;
		--liquid-tint-lightness: 80%;
		--liquid-background: hsl(
			var(--color__primary-hue) var(--liquid-tint-saturation)
				var(--liquid-tint-lightness) /
			var(--liquid-tint-opacity)
		);
	}

	/* Override #app background for light mode */
	/* Note: When gradients are disabled, JS sets --background-color to var(--surface-base) */
	/* The gradient's transparent colors let Mica show through when enabled */
	#app {
		backdrop-filter: none;
	}

	/* Sidebar specific overrides for light mode */
	#sidebar:is(.sidebar--open) {
		background: var(--sidebar-bg);
		box-shadow: hsl(0deg 0% 0% / 0.12) 4px 4px 8px;
	}
}

/* Light mode + Flat/Bordered style: fully opaque surfaces with hue tint */
:root[data-theme="light"]:is([data-style="flat"], [data-bordered="true"]) {
	--surface-base: hsl(var(--color__primary-hue) 25% 80%);
	--surface-raised: hsl(var(--color__primary-hue) 30% 85%);
	--surface-overlay: hsl(var(--color__primary-hue) 35% 90%);
	--surface-sunken: hsl(var(--color__primary-hue) 20% 75%);
}

@media (prefers-color-scheme: light) {
	:root:is([data-style="flat"], [data-bordered="true"]):not([data-theme="dark"]) {
		/* Override surfaces to be fully opaque with light hue tint */
		--surface-base: hsl(var(--color__primary-hue) 25% 80%);
		--surface-raised: hsl(var(--color__primary-hue) 30% 85%);
		--surface-overlay: hsl(var(--color__primary-hue) 35% 90%);
		--surface-sunken: hsl(var(--color__primary-hue) 20% 75%);
	}
}

/* High contrast mode support */
@media (prefers-contrast: more) {
	:root {
		--lightness-text-primary: 5%;
		font-weight: 500;
		--border-strong: hsl(
			var(--color__primary-hue) 30% var(--lightness-border) /
			0.9
		);
	}
	.sidebar__notification {
		border-width: 1.5px;
	}
}

h1 {
	font-size: var(--font-medium);
}

* {
	box-sizing: border-box;
}

select,
textarea,
input,
button {
	font: inherit;
}

/* =============================================================================
   SCROLLBAR STYLING (Token-based for light/dark mode support)
   ============================================================================= */
*::-webkit-scrollbar {
	width: var(--sb-size);
}

*::-webkit-scrollbar-track {
	background: var(--scrollbar-track);
	border-radius: 3px;
}

*::-webkit-scrollbar-thumb {
	background: var(--scrollbar-thumb);
	border-radius: 3px;
	border: 1px solid var(--scrollbar-thumb-border);
}

@supports not selector(::-webkit-scrollbar) {
	* {
		scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
	}
}

:root[data-reduced-motion="true"] * {
	animation-duration: 0ms !important;
	animation-iteration-count: 1 !important;
	transition-duration: 0ms !important;
	scroll-behavior: auto !important;
}

/* =============================================================================
   STYLE MODE OVERRIDES (Glass/Satin/Flat/Bordered)
   ============================================================================= */

/* Glass Mode (Default with proper blur effects) */
:root[data-style="glass"],
:root:not([data-style]) {
	--effect-blur: 20px;
	--effect-opacity: 0.75;
	--effect-shadow-depth: 28px;
	--effect-glow-opacity: 0.8;
	--liquid-frost-blur: 16px;
	--liquid-tint-opacity: 0.7;
	--liquid-backdrop-filter: blur(16px) saturate(1.5);
	--border-subtle: hsl(var(--color__primary-hue) 12% var(--lightness-border) / 0.2);
	--border-strong: hsl(var(--color__primary-hue) 30% var(--lightness-border) / 0.4);
}

/* Satin Mode - Medium glass effect with more opacity */
:root[data-style="satin"] {
	--effect-blur: 10px;
	--effect-opacity: 0.88;
	--effect-shadow-depth: 16px;
	--effect-glow-opacity: 0.5;
	--liquid-frost-blur: 8px;
	--liquid-tint-opacity: 0.9;
	--liquid-backdrop-filter: blur(8px) saturate(1.2);
	--border-subtle: hsl(var(--color__primary-hue) 12% var(--lightness-border) / 0.35);
	--border-strong: hsl(var(--color__primary-hue) 30% var(--lightness-border) / 0.55);
}

/* Flat Mode - No transparency, solid colors, stronger borders */
:root[data-style="flat"] {
	--effect-blur: 0px;
	--effect-opacity: 1;
	--effect-shadow-depth: 6px;
	--effect-glow-opacity: 0;
	--liquid-frost-blur: 0px;
	--liquid-tint-opacity: 1;
	--liquid-backdrop-filter: none;
	--border-subtle: hsl(var(--color__primary-hue) 12% var(--lightness-border) / 0.5);
	--border-strong: hsl(var(--color__primary-hue) 30% var(--lightness-border) / 0.8);

	/* Override surfaces to be fully opaque */
	--surface-base: hsl(
		var(--color__primary-hue) 10% var(--lightness-surface-base)
	);
	--surface-raised: hsl(
		var(--color__primary-hue) 15% var(--lightness-surface-raised)
	);
	--surface-overlay: hsl(
		var(--color__primary-hue) 20% var(--lightness-surface-overlay)
	);
	--surface-sunken: hsl(
		var(--color__primary-hue) 5% var(--lightness-surface-sunken)
	);
}

/* Solid Mode - Absolute zero transparency, 100% opaque background and surfaces */
:root[data-style="solid"] {
	--effect-blur: 0px;
	--effect-opacity: 1;
	--effect-shadow-depth: 4px;
	--effect-glow-opacity: 0;
	--liquid-frost-blur: 0px;
	--liquid-tint-opacity: 1;
	--liquid-backdrop-filter: none;
	--background-opacity: 1;
}

/* Bordered Style Mode (no transparency/blur, strong borders) */
/* Note: This removes blur/transparency but preserves hue and semantic colors */
:root[data-bordered="true"] {
	--liquid-backdrop-filter: none;
	--liquid-background: var(--surface-base);
	--liquid-box-shadow: 0 6px 16px hsl(0 0% 0% / 0.25);
	--bg-glass: var(--surface-base);
	--effect-blur: 0px;
	/* Strengthen borders and elevation for clarity without blur */
	--border-subtle: hsl(
		var(--color__primary-hue) 12% var(--lightness-border) /
		0.6
	);
	--border-strong: hsl(
		var(--color__primary-hue) 30% var(--lightness-border) /
		0.9
	);
	--border-glass: var(--border-strong);
}

/* Liquid Glass Utility Class */
.liquid-glass {
	background: var(--liquid-background);
	backdrop-filter: var(--liquid-backdrop-filter);
	-webkit-backdrop-filter: var(--liquid-backdrop-filter);
	box-shadow: var(--liquid-box-shadow);
	isolation: isolate;
	border: 1px solid transparent;
	position: relative;
}

/* Ensure content inside glass doesn't inherit backdrop blur */
.liquid-glass > * {
	backdrop-filter: none !important;
	-webkit-backdrop-filter: none !important;
}

/* Bordered Style Override */
:root[data-bordered="true"] .liquid-glass {
	backdrop-filter: none;
	-webkit-backdrop-filter: none;
	filter: none;
	border: var(--border-width-subtle) solid var(--border-strong);
}

/* Tutorial/Driver.js Theming */
.driver-popover.driverjs-theme {
	background-color: var(--surface-overlay) !important;
	color: var(--text-primary) !important;
	border: 1px solid var(--border-strong) !important;
	border-radius: 12px !important;
	backdrop-filter: blur(16px) !important;
	-webkit-backdrop-filter: blur(16px) !important;
	padding: 20px !important;
	box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4) !important;
}

.driver-popover.driverjs-theme .driver-popover-title {
	color: var(--text-primary) !important;
	font-weight: 800 !important;
	font-size: 18px !important;
}

.driver-popover.driverjs-theme .driver-popover-description {
	color: var(--text-secondary) !important;
	font-size: 14px !important;
	line-height: 1.5 !important;
}

.driver-popover.driverjs-theme .driver-popover-progress-text {
	color: var(--text-tertiary) !important;
}

.driver-popover.driverjs-theme .driver-popover-arrow {
	border-color: var(--surface-overlay) !important;
}

.driver-popover.driverjs-theme button {
	background-color: var(--interactive-base) !important;
	color: white !important;
	text-shadow: none !important;
	border: none !important;
	border-radius: 6px !important;
	font-weight: 600 !important;
	padding: 6px 14px !important;
	transition: opacity 0.2s ease !important;
}

.driver-popover.driverjs-theme button:hover {
	background-color: var(--interactive-hover) !important;
}

.driver-popover.driverjs-theme .driver-popover-close-btn {
	color: var(--text-tertiary) !important;
	background-color: transparent !important;
	border: none !important;
}

.driver-popover.driverjs-theme .driver-popover-close-btn:hover {
	color: var(--text-primary) !important;
	background-color: rgba(255, 255, 255, 0.05) !important;
}

.driver-active-element {
	outline: none !important;
	box-shadow: none !important;
}

/* Global Spinner */
.spinner {
	width: 24px;
	height: 24px;
	border: 2px solid rgba(255, 255, 255, 0.1);
	border-top: 2px solid white;
	border-radius: 50%;
	display: inline-block;
	animation: spin 0.8s linear infinite;
}

@keyframes spin {
	from { transform: rotate(0deg); }
	to { transform: rotate(360deg); }
}

.animate-spin {
	animation: spin var(--animate-spin-duration, 1s) linear infinite;
}

.field-label-manual {
    display: block;
    font-size: 13px;
    font-weight: 500;
    margin-bottom: 6px;
    color: var(--text-secondary);
}
